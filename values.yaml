global:
  imageRegistry: ""
  imagePullSecrets: []
  nameOverride: ""
  fullnameOverride: ""
  security:
    allowInsecureImages: true
  serviceAccount:
    create: true
    name: reportportal
    annotations: {}
  argocd:
    enabled: true
  securityContext: {}
  tolerations: []
  pdb:
    create: true
    maxUnavailable: "1"

gatewayAPI:
  enable: false

k8s:
  networking:
    ssl: false

k8sWaitFor:
  image:
    repository: reportportal/k8s-wait-for
    tag: latest
    pullPolicy: Always

kubectl:
  image:
    repository: bitnamisecure/kubectl
    tag: latest
    pullPolicy: Always

serviceanalyzer:
  replicaCount: 0
  image:
    repository: reportportal/service-auto-analyzer
    tag: 5.15.0
    pullPolicy: Always
  readinessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 3
    successThreshold: 1
  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 50m
      memory: 128Mi
  service:
    labels: {}
    annotations: {}

servicejobs:
  replicaCount: 0
  image:
    repository: reportportal/service-jobs
    tag: 5.15.0
    pullPolicy: Always
  readinessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 40
    timeoutSeconds: 5
    failureThreshold: 10
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 40
    timeoutSeconds: 5
    failureThreshold: 10
  coreJobs:
    cleanEventsRetention: 365
    cleanEventsCron: "0 0 */24 * * *"
    cleanAttachmentCron: "0 0 */24 * * *"
    cleanLogCron: "0 0 */24 * * *"
    cleanLaunchCron: "0 0 */24 * * *"
    batchSize: 10000
    cleanStorageCron: "0 0 */24 * * *"
    storageProjectCron: "0 */5 * * * *"
  chunksize: 200000
  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 50m
      memory: 128Mi
  service:
    labels: {}
    annotations: {}

serviceindex:
  replicaCount: 1
  image:
    repository: reportportal/service-index
    tag: 5.15.0
    pullPolicy: Always
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi
  readinessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 3
  service:
    labels: {}
    annotations: {}

serviceui:
  replicaCount: 1
  image:
    repository: reportportal/service-ui
    tag: 5.15.0
    pullPolicy: Always
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi
  readinessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
    successThreshold: 1
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 3
  service:
    labels: {}
    annotations: {}

serviceapi:
  replicaCount: 1
  image:
    repository: reportportal/service-api
    tag: 5.15.0
    pullPolicy: Always
  resources:
    requests:
      cpu: 100m
      memory: 384Mi
    limits:
      cpu: 200m
      memory: 768Mi
  jvmArgs: "-Djava.security.egd=file:/dev/./urandom -XX:+UseG1GC -XX:MinRAMPercentage=60.0 -XX:MaxRAMPercentage=80.0"
  readinessProbe:
    enabled: true
    initialDelaySeconds: 120
    periodSeconds: 15
    timeoutSeconds: 30
    failureThreshold: 3
  livenessProbe:
    enabled: true
    initialDelaySeconds: 120
    periodSeconds: 30
    timeoutSeconds: 30
    failureThreshold: 3
  secret:
    enabled: false
  cronJobs:
    loadPlugins:
      enabled: false
      schedule: "0 */6 * * *"
  patternAnalysis:
    batchSize: 1000
    cron: "0 0 */24 * * *"
  auditLogs:
    enable: false
  amqp:
    exchange: reportportal
    queues:
    - name: analyzer-index
      routingKey: analyzer.index
      durable: true
      exclusive: false
      autoDelete: false
    - name: analyzer-train
      routingKey: analyzer.train
      durable: true
      exclusive: false
      autoDelete: false
    - name: analyzer-suggest
      routingKey: analyzer.suggest
      durable: true
      exclusive: false
      autoDelete: false
    - name: analyzer-remove
      routingKey: analyzer.remove
      durable: true
      exclusive: false
      autoDelete: false
  chunksize: 200000
  env: []
  service:
    labels: {}
    annotations: {}

uat:
  replicaCount: 1
  image:
    repository: reportportal/service-authorization
    tag: 5.15.0
    pullPolicy: Always
  resources:
    requests:
      cpu: 80m
      memory: 256Mi
    limits:
      cpu: 150m
      memory: 512Mi
  jvmArgs: "-Djava.security.egd=file:/dev/./urandom -XX:MinRAMPercentage=60.0 -XX:MaxRAMPercentage=80.0"
  readinessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 40
    timeoutSeconds: 5
    failureThreshold: 10
  livenessProbe:
    enabled: true
    initialDelaySeconds: 60
    periodSeconds: 40
    timeoutSeconds: 5
    failureThreshold: 10
  secret:
    enabled: false
  superadminInitPasswd:
    secretName: ""
    passwordKeyName: superadmin-password
    password: ""
  env: []
  service:
    labels: {}
    annotations: {}
  extraInitContainers:
  - name: wait-for-minio
    image: curlimages/curl:8.12.0
    command:
    - sh
    - -c
    args:
    - |
      echo "Waiting for MinIO..."
      until nslookup reportportal-minio && \
      curl -sf http://reportportal-minio:9000/minio/health/live; do
        echo "MinIO not ready â€” retrying in 5s..."
        sleep 5
      done
      echo "MinIO is ready!"

migrations:
  image:
    repository: reportportal/migrations
    tag: 5.15.0
    pullPolicy: Always
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 100m
      memory: 128Mi

postgresql:
  install: true
  auth:
    postgresPassword: rppassword
    username: postgres
    password: rppassword
    database: reportportal
  primary:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 200m
        memory: 512Mi

rabbitmq:
  install: true
  auth:
    username: rabbitmq
    password: rabbitmqpassword
  persistence:
    enabled: true
    size: 5Gi
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 200m
      memory: 384Mi
  extraPlugins:
  - rabbitmq_auth_backend_ldap
  - rabbitmq_consistent_hash_exchange
  - rabbitmq_shovel
  - rabbitmq_shovel_management
  extraConfiguration: |-
    max_message_size = 134217728

minio:
  install: true
  auth:
    rootUser: rpuser
    rootPassword: miniopassword
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 100m
      memory: 256Mi
  persistence:
    annotations:
      helm.sh/resource-policy: keep
  console:
    enabled: false

opensearch:
  install: true
  singleNode: true
  resources:
    requests:
      cpu: 200m
      memory: 1Gi
    limits:
      cpu: 400m
      memory: 1.5Gi
  extraEnvs:
  - name: DISABLE_INSTALL_DEMO_CONFIG
    value: "true"
  - name: DISABLE_SECURITY_PLUGIN
    value: "true"

database:
  password: rppassword

msgbroker:
  vhost: analyzer
  password: rabbitmqpassword
  ssl: false

searchengine:
  ssl: false

storage:
  type: minio
  accesskey: rpuser
  secretkey: miniopassword
  bucket:
    type: single
    bucketDefaultName: rp-bucket
  ssl: false

ingress:
  enable: true
  hosts:
  - reportportal.13.93.159.247.nip.io
  path: "/"
  class: nginx
  annotations: {}
  tls:
    enabled: false
    certificate:
      gcpManaged: false

resourceQuota:
  enabled: false

rbac:
  create: true

hooks:
  preUpgrade:
    enabled: true
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi
  test:
    enabled: true
